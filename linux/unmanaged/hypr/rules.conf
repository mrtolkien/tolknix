# =============================================================================
# WINDOW & LAYER RULES
# =============================================================================
# SOME EXTERNAL DEPENDENCIES: References specific application classes/titles.
# Most rules are generic and will work with any setup.
#
# Documentation:
# - Window Rules: https://wiki.hyprland.org/Configuring/Window-Rules/
# - Layer Rules: https://wiki.hyprland.org/Configuring/Layer-Rules/
# =============================================================================

# =============================================================================
# WINDOW RULES
# =============================================================================

# Disable blur for xwayland context menus
windowrulev2 = noblur, class:^()$, title:^()$

# --- File dialogs (generic - works with most apps) ---
windowrulev2 = center, title:^(Open File)(.*)$
windowrulev2 = float, title:^(Open File)(.*)$
windowrulev2 = center, title:^(Select a File)(.*)$
windowrulev2 = float, title:^(Select a File)(.*)$
windowrulev2 = center, title:^(Choose wallpaper)(.*)$
windowrulev2 = float, title:^(Choose wallpaper)(.*)$
windowrulev2 = size 60% 65%, title:^(Choose wallpaper)(.*)$
windowrulev2 = center, title:^(Open Folder)(.*)$
windowrulev2 = float, title:^(Open Folder)(.*)$
windowrulev2 = center, title:^(Save As)(.*)$
windowrulev2 = float, title:^(Save As)(.*)$
windowrulev2 = center, title:^(Library)(.*)$
windowrulev2 = float, title:^(Library)(.*)$
windowrulev2 = center, title:^(File Upload)(.*)$
windowrulev2 = float, title:^(File Upload)(.*)$
windowrulev2 = center, title:^(.*)(wants to save)$
windowrulev2 = float, title:^(.*)(wants to save)$
windowrulev2 = center, title:^(.*)(wants to open)$
windowrulev2 = float, title:^(.*)(wants to open)$

# --- System utilities ---
# DEPENDS: blueberry (Bluetooth manager)
windowrulev2 = float, class:^(blueberry\.py)$

# DEPENDS: pavucontrol (PulseAudio volume control)
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = size 45%, class:^(pavucontrol)$
windowrulev2 = center, class:^(pavucontrol)$
windowrulev2 = float, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = size 45%, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = center, class:^(org.pulseaudio.pavucontrol)$

# DEPENDS: nm-connection-editor (NetworkManager)
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = size 45%, class:^(nm-connection-editor)$
windowrulev2 = center, class:^(nm-connection-editor)$

# --- KDE/Plasma utilities ---
# DEPENDS: KDE Plasma (various KCMs and utilities)
windowrulev2 = float, class:.*plasmawindowed.*
windowrulev2 = float, class:kcm_.*
windowrulev2 = float, class:.*bluedevilwizard
windowrulev2 = float, class:org.freedesktop.impl.portal.desktop.kde
windowrulev2 = size 60% 65%, class:org.freedesktop.impl.portal.desktop.kde

# kde-material-you-colors theme switcher (hide off-screen)
windowrulev2 = float, class:^(plasma-changeicons)$
windowrulev2 = noinitialfocus, class:^(plasma-changeicons)$
windowrulev2 = move 999999 999999, class:^(plasma-changeicons)$

# --- Dolphin file manager quirks ---
# DEPENDS: dolphin
windowrulev2 = move 40 80, title:^(Copying â€” Dolphin)$

# --- Application-specific rules ---
# DEPENDS: Warp terminal
windowrulev2 = tile, class:^dev\.warp\.Warp$

# DEPENDS: Zotero (reference manager)
windowrulev2 = float, class:^(Zotero)$
windowrulev2 = size 45%, class:^(Zotero)$

# DEPENDS: guifetch (system info)
windowrulev2 = float, class:^(guifetch)$

# Generic welcome windows
windowrulev2 = float, title:.*Welcome
windowrulev2 = float, title:.*Shell conflicts.*

# --- Picture-in-Picture (generic - works with most browsers) ---
windowrulev2 = float, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = keepaspectratio, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = move 73% 72%, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = size 25%, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = pin, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$

# --- Gaming: Tearing support for low latency ---
# DEPENDS: allow_tearing = true in general.conf
windowrulev2 = immediate, title:.*\.exe           # Wine/Proton games
windowrulev2 = immediate, title:.*minecraft.*     # Minecraft
windowrulev2 = immediate, class:^(steam_app).*    # Steam games

# --- JetBrains IDEs: Fix focus issues ---
# DEPENDS: JetBrains IDEs (IntelliJ, PyCharm, etc.)
windowrulev2 = noinitialfocus, class:^jetbrains-.*$, floating:1, title:^$|^\s$|^win\d+$

# --- Visual polish ---
# Remove shadows from tiled windows
windowrulev2 = noshadow, floating:0

# --- Workspace assignments (customize for your workflow) ---
# DEPENDS: Beeper, Todoist, YouTube Music Desktop App
windowrulev2 = workspace 11, class:^(BeeperTexts)$
windowrulev2 = workspace 11, class:^(Todoist)$
windowrulev2 = workspace 10, class:^(YouTube Music Desktop App)$

# =============================================================================
# LAYER RULES
# =============================================================================
# Layer rules affect overlay UI elements (notifications, launchers, etc.)
# Most rules here are generic and improve visual consistency.

# Global xray for better layer blending
layerrule = xray 1, .*

# Disable animations for specific overlays (improves responsiveness)
layerrule = noanim, walker      # Walker launcher
layerrule = noanim, selection   # Selection UI
layerrule = noanim, anyrun      # Anyrun launcher
layerrule = noanim, hyprpicker  # Color picker
layerrule = noanim, gtk4-layer-shell  # GTK4 overlays (fast launch)

# Blur for various layer-shell applications
layerrule = blur, gtk-layer-shell
layerrule = ignorezero, gtk-layer-shell
layerrule = blur, launcher
layerrule = ignorealpha 0.5, launcher
layerrule = blur, notifications
layerrule = ignorealpha 0.69, notifications

# DEPENDS: wlogout
layerrule = blur, logout_dialog
