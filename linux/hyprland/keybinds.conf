# =============================================================================
# KEYBINDINGS
# =============================================================================
# EXTERNAL DEPENDENCIES: Most keybinds require external programs.
# Dependencies are marked inline with each section.
#
# This uses workspace_action.sh for intelligent multi-monitor workspace switching.
# The script ensures number keys (1-9,0) switch within the current monitor's decade.
#
# Documentation: https://wiki.hyprland.org/Configuring/Binds/
# =============================================================================

# =============================================================================
# APPLICATIONS
# =============================================================================
# DEPENDS: launch_first_available.sh script, ghostty/foot/kitty (terminal),
#          firefox, fuzzel, dolphin/nautilus (file manager), yazi

bind = Super, Return, exec, ghostty
# bind = Super, E, exec, ~/.config/hypr/hyprland/scripts/launch_first_available.sh "dolphin" "nautilus" "nemo" "thunar" "${TERMINAL}" "ghostty -e fish -c yazi"
bind = Super, Y, exec, ghostty -e ~/.config/hypr/hyprland/scripts/yazi_with_shell.sh
bind = Super, C, exec, ~/.config/hypr/hyprland/scripts/launch_first_available.sh "code" "codium" "cursor" "zed" "zedit" "zeditor" "kate" "gnome-text-editor" "emacs" "command -v nvim && ghostty -e nvim" "command -v micro && ghostty -e micro"
bind = Ctrl+Shift, Escape, exec, ~/.config/hypr/hyprland/scripts/launch_first_available.sh "gnome-system-monitor" "plasma-systemmonitor --page-name Processes" "command -v btop && ghostty -e fish -c btop"
bind = Super, W, exec, firefox

# Application launcher
# DEPENDS: fuzzel
bind = Super, Space, exec, fuzzel

# =============================================================================
# WINDOW MANAGEMENT
# =============================================================================
# NO EXTERNAL DEPENDENCIES - Pure Hyprland commands

# Mouse bindings
bindm = Super, mouse:272, movewindow    # Left click + drag to move
bindm = Super, mouse:274, movewindow    # Middle click + drag to move
bindm = Super, mouse:273, resizewindow  # Right click + drag to resize

# Focus windows
bind = Super, Left, movefocus, l
bind = Super, Right, movefocus, r
bind = Super, Up, movefocus, u
bind = Super, Down, movefocus, d
bind = Super, BracketLeft, movefocus, l
bind = Super, BracketRight, movefocus, r

# Move windows (respects groups)
bind = Super+Shift, Left, movewindoworgroup, l
bind = Super+Shift, Right, movewindoworgroup, r
bind = Super+Shift, Up, movewindoworgroup, u
bind = Super+Shift, Down, movewindoworgroup, d

# Close windows
bind = Alt, F4, killactive,
bind = Super, Q, killactive,
bind = Super+Shift+Alt, Q, exec, hyprctl kill  # Force kill

# Split ratio adjustment
binde = Super, Semicolon, splitratio, -0.1
binde = Super, Apostrophe, splitratio, +0.1

# Window states
bind = Super+Alt, Space, togglefloating,
bind = Super, D, fullscreen, 1  # Maximize
bind = Super, F, fullscreen, 0  # Fullscreen
bind = Super+Alt, F, fullscreenstate, 0 3  # Fullscreen spoof
bind = Super, P, pin

# Window cycling
bind = Super, Tab, cyclenext,
bind = Super+Shift, Tab, cyclenext, prev

# Window positioning
bind = Super+Shift, C, centerwindow,

# =============================================================================
# WINDOW GROUPS (Tabbed/Stacked Windows)
# =============================================================================
# NO EXTERNAL DEPENDENCIES
# Documentation: https://wiki.hyprland.org/Configuring/Dwindle-Layout/#groups

bind = Super, G, togglegroup,
bind = Super+Shift, G, lockactivegroup, toggle
bind = Super, Home, changegroupactive, b
bind = Super, End, changegroupactive, f
bind = Super+Shift, Home, movegroupwindow, b
bind = Super+Shift, End, movegroupwindow, f

# =============================================================================
# RESIZE MODE
# =============================================================================
# DEPENDS: notify-send (libnotify)

bind = Super, R, submap, resize
bind = Super, R, exec, notify-send "Resize Mode" "Active - Use arrows/hjkl to resize, Shift to move, G for groups, Esc to exit" -t 2000 -a "Hyprland"

submap = resize
$resize_step = 50
# Resize
binde = , Right, resizeactive, $resize_step 0
binde = , Left, resizeactive, -$resize_step 0
binde = , Up, resizeactive, 0 -$resize_step
binde = , Down, resizeactive, 0 $resize_step
binde = , L, resizeactive, $resize_step 0
binde = , H, resizeactive, -$resize_step 0
binde = , K, resizeactive, 0 -$resize_step
binde = , J, resizeactive, 0 $resize_step
# Move
binde = Shift, Right, moveactive, $resize_step 0
binde = Shift, Left, moveactive, -$resize_step 0
binde = Shift, Up, moveactive, 0 -$resize_step
binde = Shift, Down, moveactive, 0 $resize_step
binde = Shift, L, moveactive, $resize_step 0
binde = Shift, H, moveactive, -$resize_step 0
binde = Shift, K, moveactive, 0 -$resize_step
binde = Shift, J, moveactive, 0 $resize_step
# Groups
bind = , G, togglegroup,
bind = Shift, G, lockactivegroup, toggle
# Exit
bind = Super, R, submap, global
bind = , Escape, submap, global
bind = , Return, submap, global
submap = global

# =============================================================================
# MONITOR
# =============================================================================
# NO EXTERNAL DEPENDENCIES

bind = Super, Comma, focusmonitor, +1

# =============================================================================
# WORKSPACE SWITCHING
# =============================================================================
# DEPENDS: workspace_action.sh script (included in hyprland/scripts/)
# This script provides intelligent workspace switching for multi-monitor setups.
# Number keys switch within the current monitor's workspace range (decade).

# Switch to workspace (using keycodes for keyboard layout compatibility)
bind = Super, code:10, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 1
bind = Super, code:11, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 2
bind = Super, code:12, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 3
bind = Super, code:13, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 4
bind = Super, code:14, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 5
bind = Super, code:15, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 6
bind = Super, code:16, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 7
bind = Super, code:17, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 8
bind = Super, code:18, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 9
bind = Super, code:19, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 10

# Keypad numbers
bindp = Super, code:87, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 1
bindp = Super, code:88, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 2
bindp = Super, code:89, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 3
bindp = Super, code:83, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 4
bindp = Super, code:84, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 5
bindp = Super, code:85, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 6
bindp = Super, code:79, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 7
bindp = Super, code:80, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 8
bindp = Super, code:81, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 9
bindp = Super, code:90, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh workspace 10

# Move window to workspace
bind = Super+Alt, code:10, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 1
bind = Super+Alt, code:11, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 2
bind = Super+Alt, code:12, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 3
bind = Super+Alt, code:13, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 4
bind = Super+Alt, code:14, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 5
bind = Super+Alt, code:15, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 6
bind = Super+Alt, code:16, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 7
bind = Super+Alt, code:17, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 8
bind = Super+Alt, code:18, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 9
bind = Super+Alt, code:19, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 10

# Keypad
bind = Super+Alt, code:87, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 1
bind = Super+Alt, code:88, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 2
bind = Super+Alt, code:89, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 3
bind = Super+Alt, code:83, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 4
bind = Super+Alt, code:84, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 5
bind = Super+Alt, code:85, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 6
bind = Super+Alt, code:79, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 7
bind = Super+Alt, code:80, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 8
bind = Super+Alt, code:81, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 9
bind = Super+Alt, code:90, exec, ~/.config/hypr/hyprland/scripts/workspace_action.sh movetoworkspacesilent 10

# Workspace navigation (relative movement)
bind = Ctrl+Super, Right, workspace, r+1
bind = Ctrl+Super, Left, workspace, r-1
bind = Ctrl+Super+Alt, Right, workspace, m+1
bind = Ctrl+Super+Alt, Left, workspace, m-1
bind = Super, Page_Down, workspace, +1
bind = Super, Page_Up, workspace, -1
bind = Ctrl+Super, Page_Down, workspace, r+1
bind = Ctrl+Super, Page_Up, workspace, r-1
bind = Super, mouse_up, workspace, +1
bind = Super, mouse_down, workspace, -1
bind = Ctrl+Super, mouse_up, workspace, r+1
bind = Ctrl+Super, mouse_down, workspace, r-1

# Move window to workspace (relative)
bind = Super+Shift, mouse_down, movetoworkspace, r-1
bind = Super+Shift, mouse_up, movetoworkspace, r+1
bind = Super+Alt, mouse_down, movetoworkspace, -1
bind = Super+Alt, mouse_up, movetoworkspace, +1
bind = Super+Shift, Page_Down, movetoworkspace, r+1
bind = Super+Shift, Page_Up, movetoworkspace, r-1
bind = Super+Alt, Page_Down, movetoworkspace, +1
bind = Super+Alt, Page_Up, movetoworkspace, -1
bind = Ctrl+Super+Shift, Right, movetoworkspace, r+1
bind = Ctrl+Super+Shift, Left, movetoworkspace, r-1

# Special workspace (scratchpad)
bind = Super, S, togglespecialworkspace,
bind = Super+Alt, S, movetoworkspacesilent, special
bind = Ctrl+Super, S, togglespecialworkspace,

# =============================================================================
# UTILITIES
# =============================================================================
# DEPENDS: fuzzel, cliphist, wl-clipboard, hyprshot, hyprpicker, grim, xdg-user-dirs

# Clipboard history
bind = Super, V, exec, pkill fuzzel || cliphist list | fuzzel --match-mode fzf --dmenu | cliphist decode | wl-copy

# Emoji picker
# DEPENDS: fuzzel-emoji.sh script
bind = Super, Period, exec, pkill fuzzel || ~/.config/hypr/hyprland/scripts/fuzzel-emoji.sh copy

# Screenshots
bind = Super+Shift, S, exec, pidof slurp || hyprshot --freeze --clipboard-only --mode region --silent
bind = Super+Shift, C, exec, hyprpicker -a
bindl = , Print, exec, grim - | wl-copy
bindln = Ctrl, Print, exec, mkdir -p $(xdg-user-dir PICTURES)/Screenshots && grim $(xdg-user-dir PICTURES)/Screenshots/Screenshot_"$(date '+%Y-%m-%d_%H.%M.%S')".png && grim - | wl-copy

# =============================================================================
# MEDIA KEYS
# =============================================================================
# DEPENDS: brightnessctl, wireplumber (wpctl), playerctl

# Brightness
bindle = , XF86MonBrightnessUp, exec, brightnessctl s 5%+
bindle = , XF86MonBrightnessDown, exec, brightnessctl s 5%-

# Volume
bindle = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 2%+ -l 1.5
bindle = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 2%-
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_SINK@ toggle
bindl = Alt, XF86AudioMute, exec, wpctl set-mute @DEFAULT_SOURCE@ toggle
bindl = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_SOURCE@ toggle
bindl = Super+Shift, M, exec, wpctl set-mute @DEFAULT_SINK@ toggle
bindl = Super+Alt, M, exec, wpctl set-mute @DEFAULT_SOURCE@ toggle

# Media controls
bindl = Super+Shift, N, exec, playerctl next || playerctl position `bc <<< "100 * $(playerctl metadata mpris:length) / 1000000 / 100"`
bindl = , XF86AudioNext, exec, playerctl next || playerctl position `bc <<< "100 * $(playerctl metadata mpris:length) / 1000000 / 100"`
bindl = , XF86AudioPrev, exec, playerctl previous
bindl = Super+Shift, B, exec, playerctl previous
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = Super+Shift, P, exec, playerctl play-pause

# =============================================================================
# SESSION MANAGEMENT
# =============================================================================
# DEPENDS: systemd (loginctl, systemctl), wlogout

bind = Super, L, exec, loginctl lock-session
bindl = Super+Shift, L, exec, systemctl suspend || loginctl suspend
bind = Ctrl+Alt, Delete, exec, wlogout -p layer-shell
bind = Ctrl+Shift+Alt+Super, Delete, exec, systemctl poweroff || loginctl poweroff

# =============================================================================
# VIRTUAL MACHINES
# =============================================================================
# DEPENDS: notify-send
# Enter this submap to disable Hyprland keybinds when using VMs

bind = Super+Alt, F1, exec, notify-send 'Entered Virtual Machine submap' 'Keybinds disabled. Hit Super+Alt+F1 to escape' -a 'Hyprland' && hyprctl dispatch submap virtual-machine
submap = virtual-machine
bind = Super+Alt, F1, exec, notify-send 'Exited Virtual Machine submap' 'Keybinds re-enabled' -a 'Hyprland' && hyprctl dispatch submap global
submap = global
